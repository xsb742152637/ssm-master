<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="model.core.menutree.dao.CoreMenuTreeDao">
    <!-- 缓存配置 -->
    <!--<cache type="org.mybatis.caches.ehcache.LoggingEhcache" >-->
        <!--<property name="timeToIdleSeconds" value="3600"/>-->
        <!--<property name="timeToLiveSeconds" value="3600"/>-->
        <!--<property name="maxEntriesLocalHeap" value="1000"/>-->
        <!--<property name="maxEntriesLocalDisk" value="10000000"/>-->
        <!--<property name="memoryStoreEvictionPolicy" value="LRU"/>-->
    <!--</cache>-->

    <!-- 目的：为dao接口方法提供sql语句配置 -->
    <select id="getMenuTree" resultType="java.util.HashMap" parameterType="java.lang.Boolean">
        select a.MENU_ID,a.MENU_LEVEL,a.OUTLINE_LEVEL,a.TITLE,a.ICON,ui.CODE,ui.URL_ID,ui.URL,ui.PARAMETER
        from core_menu_tree_info a left join core_menu_url_info ui on a.URL_ID=ui.URL_ID
        <!--<if test="_parameter  != null" >-->
        <if test="isShow != null" >
          where a.IS_SHOW = #{isShow}
        </if>
        order by convert(REPLACE(a.OUTLINE_LEVEL,'.',''),SIGNED)
    </select>

    <select id="findOneByCode" resultType="CoreMenuTreeInfoEntity" parameterType="String">
        select a.* from core_menu_tree_info a join core_menu_url_info b on a.URL_ID=b.URL_ID where b.CODE=#{code}
    </select>
</mapper>